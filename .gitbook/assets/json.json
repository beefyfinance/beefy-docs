{"openapi":"3.0.3","info":{"title":"API","version":"0.0.1"},"components":{"schemas":{"def-0":{"type":"string","enum":["arbitrum","aurora","avax","base","bsc","canto","celo","cronos","emerald","ethereum","fantom","fuse","harmony","heco","kava","metis","moonbeam","moonriver","optimism","polygon","zkevm","zksync"],"description":"The chain identifier","title":"ChainEnum"},"def-1":{"type":"string","enum":["beefy:vault","beefy:boost","beefy:gov-vault"],"description":"The product type","title":"ProductTypeEnum"},"def-2":{"type":"object","description":"A vault definition","properties":{"type":{"$ref":"#/components/schemas/def-1","description":"The product type"},"dashboardEol":{"type":"boolean","description":"Whether the product is EOL on the dashboard"},"vault":{"type":"object","properties":{"id":{"type":"string","description":"The vault id"},"chain":{"$ref":"#/components/schemas/def-0"},"token_name":{"type":"string","description":"The token name"},"token_decimals":{"type":"number","description":"The token decimals"},"contract_address":{"type":"string","description":"The vault contract address"},"want_address":{"type":"string","description":"The want token address"},"want_decimals":{"type":"number","description":"The want token decimals"},"eol":{"type":"boolean","description":"Whether the vault is EOL"},"eol_date":{"type":"string","nullable":true,"format":"date-time","description":"The EOL date"},"assets":{"type":"array","items":{"type":"string"}},"protocol":{"type":"string","description":"The protocol identifier"},"protocol_product":{"type":"string","description":"The protocol product identifier"},"want_price_feed_key":{"type":"string","description":"The want price feed key"}},"required":["id","chain","token_name","token_decimals","contract_address","want_address","want_decimals","eol","eol_date","assets","protocol","protocol_product","want_price_feed_key"]}},"required":["type","dashboardEol","vault"],"title":"ProductStdVault"},"def-3":{"type":"object","description":"A boost definition","properties":{"type":{"$ref":"#/components/schemas/def-1","description":"The product type"},"dashboardEol":{"type":"boolean","description":"Whether the product is EOL on the dashboard"},"boost":{"type":"object","properties":{"id":{"type":"string","description":"The boost id"},"chain":{"$ref":"#/components/schemas/def-0"},"vault_id":{"type":"string","description":"The vault id this boost refers to"},"name":{"type":"string","description":"The boost name"},"contract_address":{"type":"string","description":"The boost contract address"},"eol":{"type":"boolean","description":"Whether the boost is EOL"},"eol_date":{"type":"string","nullable":true,"format":"date-time","description":"The EOL date"},"staked_token_address":{"type":"string","description":"The staked token address"},"staked_token_decimals":{"type":"number","description":"The staked token decimals"},"vault_want_address":{"type":"string","description":"The vault want address"},"vault_want_decimals":{"type":"number","description":"The vault want decimals"},"reward_token_decimals":{"type":"number","description":"The reward token decimals"},"reward_token_symbol":{"type":"string","description":"The reward token symbol"},"reward_token_address":{"type":"string","description":"The reward token address"},"reward_token_price_feed_key":{"type":"string","description":"The reward token price feed key"}},"required":["id","chain","vault_id","name","eol","eol_date","contract_address","staked_token_address","staked_token_decimals","vault_want_address","vault_want_decimals","reward_token_decimals","reward_token_symbol","reward_token_address","reward_token_price_feed_key"]}},"required":["type","dashboardEol","boost"],"title":"ProductBoost"},"def-4":{"type":"object","description":"A governance vault definition","properties":{"type":{"$ref":"#/components/schemas/def-1","description":"The product type"},"dashboardEol":{"type":"boolean","description":"Whether the product is EOL on the dashboard"},"vault":{"type":"object","properties":{"id":{"type":"string","description":"The vault id"},"chain":{"$ref":"#/components/schemas/def-0"},"token_name":{"type":"string","description":"The token name"},"token_decimals":{"type":"number","description":"The token decimals"},"contract_address":{"type":"string","description":"The vault contract address"},"want_address":{"type":"string","description":"The want token address"},"want_decimals":{"type":"number","description":"The want token decimals"},"eol":{"type":"boolean","description":"Whether the vault is EOL"},"eol_date":{"type":"string","nullable":true,"format":"date-time","description":"The EOL date"},"assets":{"type":"array","items":{"type":"string"}},"protocol":{"type":"string","description":"The protocol identifier"},"protocol_product":{"type":"string","description":"The protocol product identifier"},"want_price_feed_key":{"type":"string","description":"The want price feed key"},"is_gov_vault":{"type":"boolean","description":"Whether the vault is a governance vault"},"gov_vault_reward_token_symbol":{"type":"string","description":"The governance vault reward token symbol"},"gov_vault_reward_token_address":{"type":"string","description":"The governance vault reward token address"},"gov_vault_reward_token_decimals":{"type":"number","description":"The governance vault reward token decimals"}},"required":["id","chain","token_name","token_decimals","contract_address","want_address","want_decimals","eol","eol_date","assets","protocol","protocol_product","want_price_feed_key","is_gov_vault","gov_vault_reward_token_symbol","gov_vault_reward_token_address","gov_vault_reward_token_decimals"]}},"required":["type","dashboardEol","vault"],"title":"ProductGovVault"},"def-5":{"type":"object","description":"A product definition","properties":{"productKey":{"type":"string","description":"Functional product identifier"},"chain":{"$ref":"#/components/schemas/def-0"},"productData":{"oneOf":[{"$ref":"#/components/schemas/def-2"},{"$ref":"#/components/schemas/def-3"},{"$ref":"#/components/schemas/def-4"}],"discriminator":{"propertyName":"type","mapping":{"beefy:vault":"ProductStdVault","beefy:boost":"ProductBoost","beefy:gov-vault":"ProductGovVault"}}}},"required":["productKey","chain","productData"],"title":"Product"},"def-6":{"type":"object","properties":{"datetime":{"type":"string","format":"date-time","description":"The transaction datetime"},"product_key":{"type":"string","description":"The product key"},"display_name":{"type":"string","description":"The product display name"},"chain":{"$ref":"#/components/schemas/def-0"},"is_eol":{"type":"boolean","description":"Whether the product is EOL"},"is_dashboard_eol":{"type":"boolean","description":"Whether the product is EOL on the dashboard"},"transaction_hash":{"type":"string","nullable":true,"description":"The transaction hash"},"share_to_underlying_price":{"type":"number","description":"The share to underlying price"},"underlying_to_usd_price":{"type":"number","nullable":true,"description":"The underlying to USD price"},"share_balance":{"type":"number","description":"The share balance"},"underlying_balance":{"type":"number","description":"The underlying balance"},"usd_balance":{"type":"number","nullable":true,"description":"The USD balance"},"share_diff":{"type":"number","description":"The share diff"},"underlying_diff":{"type":"number","description":"The underlying diff"},"usd_diff":{"type":"number","nullable":true,"description":"The USD diff"}},"required":["datetime","product_key","display_name","chain","is_eol","is_dashboard_eol","transaction_hash","share_to_underlying_price","underlying_to_usd_price","share_balance","underlying_balance","usd_balance","share_diff","underlying_diff","usd_diff"],"title":"InvestorTimelineRow"}}},"paths":{"/api/v1/beefy/timeline":{"get":{"summary":"Fetches the investor timeline","tags":["portfolio"],"description":"Describes all transactions for a given investor","parameters":[{"schema":{"type":"string","minLength":42,"maxLength":42,"pattern":"^0x[a-fA-F0-9]{40}$"},"in":"query","name":"address","required":true}],"responses":{"200":{"description":"The investor timeline, list of all deposit and withdraw transaction for a given investor","content":{"application/json":{"schema":{"description":"The investor timeline, list of all deposit and withdraw transaction for a given investor","type":"array","items":{"$ref":"#/components/schemas/def-6"}}}}}}}},"/api/v1/beefy/product/{chain}":{"get":{"summary":"Fetches all product configurations for a chain","tags":["product"],"description":"Returns the configuration accounted for in databarn","parameters":[{"schema":{"type":"boolean","default":false},"in":"query","name":"include_eol","required":false,"description":"Include EOL (end of life) products, you probably never want to set this to true"},{"schema":{"type":"string","enum":["arbitrum","aurora","avax","base","bsc","canto","celo","cronos","emerald","ethereum","fantom","fuse","harmony","heco","kava","metis","moonbeam","moonriver","optimism","polygon","zkevm","zksync"]},"in":"path","name":"chain","required":true,"description":"Only include produce for this chain"}],"responses":{"200":{"description":"List of all beefy products, vaults, boosts, governance vaults, etc.","content":{"application/json":{"schema":{"description":"List of all beefy products, vaults, boosts, governance vaults, etc.","type":"array","items":{"$ref":"#/components/schemas/def-5"}}}}}}}},"/api/v1/beefy/product/{chain}/{contract_address}":{"get":{"summary":"Fetch a specific product configuration","tags":["product"],"description":"Find one product configuration by chain and contract address","parameters":[{"schema":{"type":"string","enum":["arbitrum","aurora","avax","base","bsc","canto","celo","cronos","emerald","ethereum","fantom","fuse","harmony","heco","kava","metis","moonbeam","moonriver","optimism","polygon","zkevm","zksync"]},"in":"path","name":"chain","required":true,"description":"Only include products for this chain"},{"schema":{"type":"string","minLength":42,"maxLength":42,"pattern":"^0x[a-fA-F0-9]{40}$"},"in":"path","name":"contract_address","required":true,"description":"The product contract address"}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/def-5"}}}}}}},"/api/v1/beefy/product/{chain}/{contract_address}/tvl":{"get":{"summary":"Get tvl snapshots in usd for a specific product.","tags":["product"],"description":"This endpoint returns snapshots of the api /tvls endpoints done every 15 minutes and can be used to request raw historical data but the time range must not exceede 1 week and the result will be truncated to 1000 elements. `from_date` is inclusive and `to_date` is exclusive to make is easier to use in loops","parameters":[{"schema":{"type":"string","format":"date-time"},"example":"2023-01-01T00:00:00","in":"query","name":"from_date_utc","required":true,"description":"Inclusive date time to fetch data from, interpreted as utc tz"},{"schema":{"type":"string","format":"date-time"},"example":"2023-01-01T00:00:00","in":"query","name":"to_date_utc","required":true,"description":"Exclusive date time to fetch data to, interpreted as utc tz"},{"schema":{"type":"string","enum":["arbitrum","aurora","avax","base","bsc","canto","celo","cronos","emerald","ethereum","fantom","fuse","harmony","heco","kava","metis","moonbeam","moonriver","optimism","polygon","zkevm","zksync"]},"in":"path","name":"chain","required":true,"description":"Only include products for this chain"},{"schema":{"type":"string","minLength":42,"maxLength":42,"pattern":"^0x[a-fA-F0-9]{40}$"},"in":"path","name":"contract_address","required":true,"description":"The product contract address"}],"responses":{"200":{"description":"The raw tvl time series","content":{"application/json":{"schema":{"type":"array","description":"The raw tvl time series","items":{"type":"array","description":"The first element is the datetime in ISO format, the second element is the product tvl in usd","items":{"anyOf":[{"type":"string","format":"date-time"},{"type":"number","minimum":0}]},"example":[["2021-01-01T00:00:00",1234.34]]}}}}}}}},"/api/v1/price/":{"get":{"summary":"Get a quick price time series for a given product and time bucket","tags":["price"],"description":"This endpoint is essentially used for charting and UIs as it provides a simple interface to get the most widely displayed time series.","parameters":[{"schema":{"type":"string","minLength":10,"maxLength":100},"in":"query","name":"product_key","required":true},{"schema":{"type":"string","enum":["share_to_underlying","underlying_to_usd"]},"in":"query","name":"price_type","required":true,"description":"`share_to_underlying` is the ratio from share token to LP token (ppfs). `underlying_to_usd` is the ratio from an LP token to USD."},{"schema":{"type":"string","enum":["1h_1d","1h_1w","1h_1M","4h_3M","1d_1M","1d_1Y","1d_all"]},"in":"query","name":"time_bucket","required":true,"description":"Defines a bucket size and a time range like `<bucket size>_<time range>`. For example, `1d_1M` means: 1 month of data aggregated by buckets of 1 day."}],"responses":{"200":{"description":"The price time series","content":{"application/json":{"schema":{"type":"array","description":"The price time series","items":{"type":"array","description":"The first element is the datetime in ISO format, the second element is the open price of the time_bucket, the third element is the high price of the time_bucket, the fourth element is the low price of the time_bucket, the fifth element is the close price of the time_bucket","items":{"anyOf":[{"type":"string","format":"date-time"},{"type":"string"}]},"example":[["2021-01-01T00:00:00","1000.0000012123","1000.0000012123","1000.0000012123","1000.0000012123"]]}}}}}}}},"/api/v1/price/raw":{"get":{"summary":"Get a raw historical time series for a given time range.","tags":["price"],"description":"This endpoint can be used to request raw historical data but the time range must not exceede a week and the result will be truncated to 1000 elements. `from_date` is inclusive and `to_date` is exclusive to make is easier to use in loops","parameters":[{"schema":{"type":"string","minLength":10,"maxLength":100},"in":"query","name":"product_key","required":true},{"schema":{"type":"string","enum":["share_to_underlying","underlying_to_usd"]},"in":"query","name":"price_type","required":true,"description":"`share_to_underlying` is the ratio from share token to LP token (ppfs). `underlying_to_usd` is the ratio from an LP token to USD."},{"schema":{"type":"string","format":"date-time"},"example":"2023-01-01T00:00:00","in":"query","name":"from_date_utc","required":true,"description":"Inclusive date time to fetch data from, interpreted as utc tz"},{"schema":{"type":"string","format":"date-time"},"example":"2023-01-01T00:00:00","in":"query","name":"to_date_utc","required":true,"description":"Exclusive date time to fetch data to, interpreted as utc tz"}],"responses":{"200":{"description":"The raw price time series","content":{"application/json":{"schema":{"type":"array","description":"The raw price time series","items":{"type":"array","description":"The first element is the datetime in ISO format, the second element is the chain block number and the third element the raw price data","items":{"anyOf":[{"type":"string","format":"date-time"},{"type":"integer","minimum":0},{"type":"string"}]},"example":[["2021-01-01T00:00:00",1234,"1000.0000012123"]]}}}}}}}},"/api/v1/import-state/":{"get":{"parameters":[{"schema":{"type":"string","minLength":10,"maxLength":100},"in":"query","name":"product_key","required":true},{"schema":{"type":"string","enum":["product_investments","share_to_underlying","underlying_to_usd"]},"in":"query","name":"import_type","required":true}],"responses":{"200":{"description":"Default Response"}}}}}}